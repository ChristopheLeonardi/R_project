---
title: "R Notebook"
output: html_notebook
---

```{r}
library(shiny)
library(DT)
ui <- fluidPage(
  titlePanel("Séléctionner un fichier CSV"),
  sidebarLayout(
    sidebarPanel(
      fileInput("file", "Choose a CSV file",
                accept = c("text/csv", "text/comma-separated-values,text/plain", ".csv")),
      radioButtons('sep', 'Separator', c(Comma=',', Semicolon=';', Tab='\t'), ';'),
      checkboxGroupInput("columns", "Select columns to keep:",
                         choices = colnames(data())) 
                         
    ),
    mainPanel(
      tableOutput("data")
    )
  )
)

server <- function(input, output,session) {
  data <- reactive({
    req(input$file)
    df <- read.csv(input$file$datapath, header = TRUE, sep = input$sep)
    updateCheckboxGroupInput(session, "columns", "Select columns to keep:", 
                             choices = colnames(df),
                             selected = colnames(df)
                             )
    df
  })
  
  output$data <- renderTable({
    data()[, input$columns]
  }, server = TRUE)
}
shinyApp(ui = ui, server = server)
```
